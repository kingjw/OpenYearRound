<style>
.check_Content{
  text-align: center;
  width: 90%;
  height:100%;
  background-color: #fefefe;
  margin: auto;
  padding: 1%;
  border: 1px solid #888;
  border-radius: 5px;
}
.checkbtn{
  color: rgb(255, 255, 255);
  background-color:#5a95b1;
  border-color: #5a95b1;
  border-style: none;
  height: 38px;
  width: 80%;
  /* margin-top: 14%; */
  margin-bottom: 2%;
  border-radius: 2px;
}
.formModal{
  margin-bottom: 1%;
}
.checkbtn:hover{
  color: rgb(255, 255, 255);
  background-color:#5a95b1;
  border-color: #5a95b1;
  border-style: none;
}

#contentTable{
  border-bottom-color: white;
}
.titleDate{
  border-top-color: #469fbb;
  border-bottom-color: #469fbb;
  height: 7%;
  text-align: center;
}
#modalButtonDiv{
  display : flex;
  align-items : center;
  height: 100%;
}
.reformButton{
  width: 10%;
  height: 38px;
  color: rgb(255, 255, 255);
  border-color: #469fbb;
  border-style: none;
  background-color:#469fbb;
  margin-left: 39%;
}
.deleteButton{
  width: 10%;
  height: 38px;
  color: rgb(255, 255, 255);
  border-color: #469fbb;
  border-style: none;
  background-color:#469fbb;
  margin-left: 2%;
  display: table-cell;
  vertical-align: center;
}
#content{
  height:50%;
  border-bottom-color: white;
}
#BoardModalContent{
  width: 90%;
  margin-left: 5%;
  height: 90%;
  font-size: 9px;
  width: 90%;
  margin-left: 5%;
  height: 90%;
}
.BoardModalContentArea{
  background-color: white;
  font-size: 9px;
}
.contentTitle{
  border-top-color: #469fbb;
  border-bottom-color: #469fbb;
  height: 7%;
  text-align: center;
}
@media all and (orientation:portrait){
  .deleteButton,.reformButton{
    width: 20%;
  }
  .reformButton{
    margin-left: 29%;
  }
  #numberCheck {
    padding-top: 20%; /* Location of the box */
  }
}
@media screen and (min-width:750px) and (max-width:1080px){
  #BoardModalContent{
    font-size: 12px;
  }
  .BoardModalContentArea{
    font-size: 12px;
  }
}
@media screen and (min-width:1081px) and (max-width:1600px){
  #BoardModalContent{
    font-size: 14px;
  }
  .BoardModalContentArea{
    font-size: 14px;
  }
}
@media screen and (min-width:1601px) and (max-width:1920px){
  #BoardModalContent{
    font-size: 16px;
  }
  .BoardModalContentArea{
    font-size: 16px;
  }
}

@media screen and (min-width:1921px) and (max-width:2560px){
  #BoardModalContent{
    font-size: 20px;
  }
  .BoardModalContentArea{
    font-size: 20px;
  }
}
@media screen and (min-width:2561px){
  #BoardModalContent{
    font-size: 25px;
  }
  .BoardModalContentArea{
    font-size: 25px;
  }
}
</style>
<table id="BoardModalContent">
  <tr>
    <td class="titleDate">제목</td>
    <td class="contentTitle"><%= rows[0].title %></td>
    <td class="titleDate">게시일</td>
    <td class="titleDate"><%= rows[0].date %></td>
  </tr>
  <tr>
    <td id="contentTable" colspan="4" style="height:7%">내용</td>
  </tr>
  <tr>
    <td colspan="6"><textarea  readonly="readonly" style="height:100%"class='BoardModalContentArea form-control' rows='15' ><%= rows[0].text %></textarea></td>
  </tr>
</table>

<div id="modalButtonDiv">
  <input type='button' name='write' value='수정'id='reformButton'class="form-control"></input>
  <input type='button' name='write' value='삭제' id='deleteButton'class="form-control"></input>
</div>

<div class="numberCheck2">
  <div class="check_Content">
    <span class="checkClose2">&times;</span>
    <label></label>
    <div class="formModal">
      <div class="col-sm-12">
        <input  type="password"class=' form-control' id="checkPassword2"rows='1' placeholder="비밀번호를 입력해주세요."></input>
      </div>
    </div>
    <div >
      <button  type="button" class="okay_btn2" >확인</button>
    </div>
  </div>
</div>

<div class="numberCheck3"><!--수정하기 위해서 비밀번호 받는 모달-->
  <div class="check_Content">
    <span class="checkClose3">&times;</span>
    <label></label>
    <div class="formModal">
      <div class="col-sm-12">
        <input  type="password"class='form-control'  id="checkPassword3"rows='1' placeholder="비밀번호를 입력해주세요."></input>
      </div>
    </div>
    <button  type="button" id="okay_btn" style="margin : 20%;">확인</button>
  </div>
</div>
<script>
var passwordCheck2=document.getElementById("checkPassword2");
var passwordCheck3=document.getElementById("checkPassword3");
var contentTitle=document.getElementById('contentTitle');
var content=document.getElementById('BoardModalContentArea');
var title_nameR=document.getElementById('title_nameR');
var contentsR=document.getElementById('contentsR');
// deletebtn.onclick=function(){
$('.deleteButton').click(function(){
  $('.numberCheck2').css('display','block');
  $('.checkClose2').click(function(){
    $('.numberCheck2').css('display','none');
  });

  // if (event.target == numberCheck2) {
  //   numberCheck2.style.display="none";
  // };

  $('.numberCheck2').keypress(function(event){
    console.log('ok');
   if ( event.which == 13 ) {
       $('.okay_btn2').click();
       return false;
   }
  });

  $('.okay_btn2').click(function(){
    var password2=passwordCheck2.value;

    var data = {
      'Password': password2
      // 'title' : title
    }
    // console.log(data);
    $.ajax({
      type: "POST",
      url: "/check/goCheck",
      contentType: "application/x-www-form-urlencoded; charset=UTF-8",
      cache: false,
      datatype: "json", // expecting JSON to be returnedzz
      data: data,
      success: function(result) {
              if(result['results']==100){
                alert('삭제완료');
                $(window).attr('location','/board/goCheckk/<%=rows[0].id%>');

            }else {
              alert('비밀번호가 일치하지 않습니다.');
              passwordCheck2.value="";
            }
        //     }
        // })
      },
    })
  });
});

$('.reformButton').click(function(){

  $('.numberCheck3').css('display','block');
$('.checkClose3').click(function(){
  $('.numberCheck3').css('display','none');
});


$('.uploadClose2').click(function(){
  $('.textUpload2').css('display','none');
});
  // if (event.target == numberCheck3) {
  //   numberCheck3.style.display="none";
  // };

  $('.numberCheck3').keypress(function(event){
    if ( event.which == 13 ) {
      $('.okay_btn3').click();
      return false;
    }
  });
  $('.okay_btn3').click(function(){
    var password3=passwordCheck3.value;

    var data = {
      'Password': password3
    }
    $.ajax({
      type: "POST",
      url: "/check/goCheck",
      contentType: "application/x-www-form-urlencoded; charset=UTF-8",
      cache: false,
      datatype: "json", // expecting JSON to be returnedzz
      data: data,
      success: function(result) {
        if(result['results']==100){
          passwordCheck3.value="";
          $('.numberCheck3').css('display','none');
          $('.textUpload2').css('display','block');

        }else {
          alert('비밀번호가 일치하지 않습니다.');
          passwordCheck3.value="";
        }
      },
    })
  });
});

$('#reform_btn').click(function(){
  var re_title = $('#re_title').val();
  var re_contents = $('#re_contens').val();
  var re_now = new Date();

  function leadingZeros(n, digits){
    var zero='';
    n = n.toString();
    if(n.length < digits){
      for(i = 0 ; i < digits - n.length; i++){
        zero += '0';
      }
    }
    return zero + n;
  }
  var re_post_date = leadingZeros(re_now.getYear()-100,2)+ '-'+
            leadingZeros(re_now.getMonth()+1,2)+'-' +
            leadingZeros(re_now.getDate(),2);




    if(re_title=='')
    alert("제목을 입력하세요");
    else if(re_contents == '')
    alert("내용을 입력하세요");
    else{
    var data={
    'title' : re_title,
    'contents' : re_contents,
    'date' : re_post_date
    }
    console.log(data);
   $.ajax({
     type : 'post',
     url : '/board/reBoard/<%=rows[0].id%>',
     contentType: "application/x-www-form-urlencoded; charset=UTF-8",
     cache: false,
     data: data,
     datatype: 'json',
     success : function(result) {
       if(result['result'] == 'success'){
         alert('수정완료');
         location.reload();
       }else{
         console.log(result);
         alert('등록실패1');
       }
     },
     error : function(error){
       alert('등록실패2');

     }
   });
  }
});
</script>
