<style>
.formModal{
  margin-bottom: 1%;
}

#okay_btn,.okay_btn2,.okay_btn3{
  height: 38px;
  border-radius: 2px;
  text-align: center;
  width: 90%;
  background-color: #469fbb;
  border-color: #469fbb;
  color: white;
  border-style: none;
  margin-top: 3%;
  margin-bottom:3%;
}

#contentTable{
  border-bottom-color: white;
}
.titleDate{
  border-top-color: #469fbb;
  border-bottom-color: #469fbb;
  height: 7%;
  text-align: center;
}
#modalButtonDiv{
  display : flex;
  align-items : center;
  height: 100%;
}
#modal-boardview-content{
  background-color: white;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 90%;
  height:90%;
  border-radius: 5px;
}
.reformButton{
  width: 10%;
  height: 38px;
  color: rgb(255, 255, 255);
  border-color: #469fbb;
  border-style: none;
  background-color:#469fbb;
  margin-left: 39%;
}
.deleteButton{
  width: 10%;
  height: 38px;
  color: rgb(255, 255, 255);
  border-color: #469fbb;
  border-style: none;
  background-color:#469fbb;
  margin-left: 2%;
  display: table-cell;
  vertical-align: center;
}
#content{
  height:50%;
  border-bottom-color: white;
}
#BoardModalContent{
  width: 90%;
  margin-left: 5%;
  height: 85%;
  font-size: 9px;
  width: 90%;
  margin-left: 5%;
}
.BoardModalContentArea{
  background-color: white;
  font-size: 9px;
  width: 100%;
    border-radius: 5px;
    padding: 1%;

}
::-webkit-scrollbar {

display:none;

}
.contentTitle{
  border-top-color: #469fbb;
  border-bottom-color: #469fbb;
  height: 7%;
  text-align: center;
}
.contentDiv{
  border-bottom-style: hidden;
}
@media all and (orientation:portrait){
  .deleteButton,.reformButton{
    width: 20%;
  }
  .reformButton{
    margin-left: 29%;
  }
  #numberCheck {
    padding-top: 20%; /* Location of the box */
  }
  #BoardModalContent{
    height: 70%;
  }
  #modal-boardview-content{
    height:60%;
  }
  .modal{
    padding-top: 20%;
  }
}
@media screen and (min-width:750px) and (max-width:1080px){
  #BoardModalContent{
    font-size: 12px;
  }
  .BoardModalContentArea{
    font-size: 12px;
  }
}
@media screen and (min-width:1081px) and (max-width:1600px){
  #BoardModalContent{
    font-size: 14px;
  }
  .BoardModalContentArea{
    font-size: 14px;
  }
}
@media screen and (min-width:1601px) and (max-width:1920px){
  #BoardModalContent{
    font-size: 16px;
  }
  .BoardModalContentArea{
    font-size: 16px;
  }
}

@media screen and (min-width:1921px) and (max-width:2560px){
  #BoardModalContent{
    font-size: 20px;
  }
  .BoardModalContentArea{
    font-size: 20px;
  }
}
@media screen and (min-width:2561px){
  #BoardModalContent{
    font-size: 25px;
  }
  .BoardModalContentArea{
    font-size: 25px;
  }
}
</style>
<table id="BoardModalContent">
      <span class="contentClose">&times;</span>
  <tr>
    <td class="titleDate">제목</td>
    <td class="contentTitle"><%= rows[0].title %></td>
    <td class="titleDate">게시일</td>
    <td class="titleDate"><%= rows[0].date %></td>
  </tr>
  <tr class="contentDiv">
    <td colspan="6"><textarea  readonly="readonly" style="height:85%"class='BoardModalContentArea' rows='12' ><%= rows[0].text %></textarea></td>
  </tr>
</table>

<div id="modalButtonDiv">
  <input type='button' onclick="btn1();" name='write' value='수정'class="reformButton form-control" ></input>
  <input type='button' onclick="btn2();" name='write' value='삭제' class="deleteButton form-control"></input>
</div>

<div class="numberCheck2">
  <div class="check_Content">
    <span class="checkClose2">&times;</span>
    <label></label>
    <div class="formModal">
      <div class="col-sm-12">
        <input  type="password"class='checkPassword2 form-control' rows='1' placeholder="비밀번호를 입력해주세요."></input>
      </div>
    </div>
    <div >
      <button  type="button" class="okay_btn2" >확인</button>
    </div>
  </div>
</div>

<div class="numberCheck3"><!--수정하기 위해서 비밀번호 받는 모달-->
  <div class="check_Content">
    <span class="checkClose3">&times;</span>
    <label></label>
    <div class="formModal">
      <div class="col-sm-12">
        <input  type="password"class='checkPassword3 form-control'  rows='1' placeholder="비밀번호를 입력해주세요."></input>
      </div>
    </div>
    <div >
      <button  type="button" class="okay_btn3" >확인</button>
    </div>
  </div>
</div>

<div class="textUpload2"><!--수정 하는 공간 모달-->
  <div class="modal-content">
    <span class="uploadClose2">&times;</span>
    <div class="form-group">
      <label class="control-label col-sm-3">제목</label>
      <div class="col-sm-12">
        <textarea class='title_nameR form-control' rows='1' id="re_title"><%= rows[0].title %></textarea>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5">내용</label>
      <div class="col-sm-12">
        <textarea class='contentsR form-control' rows='7' id="re_contens"><%= rows[0].text %></textarea>
      </div>
    </div>
    <button type="button" class="ok_button_on_board2" id="reform_btn">수정한것 올리기 버튼</button>
  </div>
</div>

<script>

$('.contentClose').click(function(){
  location.reload();
  // $('.modal').css('display',"none");
});
// deletebtn.onclick=function(){
function btn2(){
  console.log('deleteButton click');
  $('.numberCheck2').css('display','block');
  $('.checkClose2').click(function(){
    location.reload();
    $('.numberCheck2').css('display','none');
  });

  // if (event.target == numberCheck2) {
  //   numberCheck2.style.display="none";
  // };

  $('.numberCheck2').keypress(function(event){
    console.log('ok');
    if ( event.which == 13 ) {
      $('.okay_btn2').click();
      return false;
    }
  });

  $('.okay_btn2').click(function(){
    var index=$('.okay_btn2').index(this);
    var passwordCheck2=document.getElementsByClassName("checkPassword2")[index];
    var password2=passwordCheck2.value;

    var data = {
      'Password': password2
      // 'title' : title
    }
    // console.log(data);
    $.ajax({
      type: "POST",
      url: "/check/goCheck",
      contentType: "application/x-www-form-urlencoded; charset=UTF-8",
      cache: false,
      datatype: "json", // expecting JSON to be returnedzz
      data: data,
      success: function(result) {
        console.log(data);
        if(result['results']==100){
          alert('삭제완료');
          $(window).attr('location','/board/goCheckk/<%=rows[0].id%>');

        }else {
          alert('비밀번호가 일치하지 않습니다.');
          passwordCheck2.value="";
        }
        //     }
        // })
      },
    })
  });
};
var isRun = false;
function btn1(){

  $('.numberCheck3').css('display','block');
  $('.checkClose3').click(function(){
     location.reload();
    // $('.numberCheck3').css('display','none');
  });

  $('.uploadClose2').click(function(){
    location.reload();
    // $('.textUpload2').css('display','none');

  });
  // if (event.target == numberCheck3) {
  //   numberCheck3.style.display="none";
  // };

  $('.numberCheck3').keypress(function(event){
    if ( event.which == 13 ) {
      $('.okay_btn3').click();
      return false;
    }
  });
  $('.okay_btn3').click(function(){
    var index=$('.okay_btn3').index(this);
    var passwordCheck3=document.getElementsByClassName("checkPassword3")[index];
    var password3=passwordCheck3.value;
    // if(isRun == true) {
    //         return;
    //     }
    //     isRun = true;
    var data = {
      'Password': password3
    }
    console.log(data);
    $.ajax({
      type: "POST",
      url: "/check/goCheck?"+ Math.random(),
      // async:false,
      contentType: "application/x-www-form-urlencoded; charset=UTF-8",
      cache: false,
      datatype: "json", // expecting JSON to be returnedzz
      data: data,
      success: function(result) {
        if(result['results']==100){
          $('.numberCheck3').css('display','none');
          $('.textUpload2').css('display','block');
          passwordCheck3.value="";
          // isRun  = false;
        }else {
          alert('비밀번호가 일치하지 않습니다.');
          passwordCheck3.value="";
          // isRun  = false;
        }
      },
    })
  });
};

$('#reform_btn').click(function(){
  var re_title = $('#re_title').val();
  var re_contents = $('#re_contens').val();
  var re_now = new Date();

  function leadingZeros(n, digits){
    var zero='';
    n = n.toString();
    if(n.length < digits){
      for(i = 0 ; i < digits - n.length; i++){
        zero += '0';
      }
    }
    return zero + n;
  }
  var re_post_date = leadingZeros(re_now.getYear()-100,2)+ '-'+
  leadingZeros(re_now.getMonth()+1,2)+'-' +
  leadingZeros(re_now.getDate(),2);




  if(re_title=='')
  alert("제목을 입력하세요");
  else if(re_contents == '')
  alert("내용을 입력하세요");
  else{
    var data={
      'title' : re_title,
      'contents' : re_contents,
      'date' : re_post_date
    }
    console.log(data);
    $.ajax({
      type : 'post',
      url : '/board/reBoard/<%=rows[0].id%>',
      contentType: "application/x-www-form-urlencoded; charset=UTF-8",
      cache: false,
      data: data,
      datatype: 'json',
      success : function(result) {
        if(result['result'] == 'success'){
          alert('수정완료');
          location.reload();
        }else{
          console.log(result);
          alert('등록실패1');
        }
      },
      error : function(error){
        alert('등록실패2');

      }
    });
  }
});
</script>
